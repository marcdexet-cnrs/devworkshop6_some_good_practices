= Stability

//tag::include[]


[.subsection.background]
[.center]
[%notitle]
== Stability

[.big]#{chapter_name} - Part {counter:design_counter:1}#

[.huge]#Stability#


[transition=fade]
[%notitle]
== Open Closed 0

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_0.svg[]
--

[.right-column]
[.center]
--
Imagine a professional Camera
--

[transition=fade]
[%notitle]
== Open Closed 1

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_1.svg[]
--

[.right-column]
[.center]
--
It is built upon +
a _base camera_ +
with differents *connectors* +
for _optical_, +
_battery_, +
visor...
--

[transition=fade]
[%notitle]
== Open Closed 2

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_2.svg[]
--

[.right-column]
--
So you can create several configurations.
--

[transition=fade]
[%notitle]
== Open Closed 3

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_3.svg[]
--

[.right-column]
--
One with a more powerful _battery_...
--

[transition=fade]
[%notitle]
== Open Closed 4

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_4.svg[]
--

[.right-column]
--
One with a different _optical system_...
--

[transition=fade]
[%notitle]
== Open Closed 5

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_5.svg[]
--

[.right-column]
--
One with a deported _monitoring device_...
--

[transition=fade]
[%notitle]
== Open Closed 6

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_6.svg[]
--

[.right-column]
--
Or a waterproof model +
with deported _commands_.
--


[transition=fade]
[%notitle]
== Open Closed 6.1

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_6.1.svg[]
--

[.right-column]
--
But you can not modify the _command sytem_...
--

[transition=fade]
[%notitle]
== Open Closed 6.2

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_6.2.svg[]
--

[.right-column]
--
Nor modify the _optical connector_ location...

[.fragment]
Without modifiying _Base Camera_.

[.fragment]
And of course it's forbidden, only Manufacturer could do this.
--



[%notitle]
== Open closed.

[.center]
--
The camera is +
[.fragment]
[.huge]#Open# for *extension* +
[.fragment]
and
[.fragment]
[.huge]#Closed# for *modification*.

[.fragment]
This is a illustration of the +
*Open/Closed* principle.
--


[transition=fade]
[%notitle]
== Open Closed 7

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_7.svg[]
--

[.right-column]
--
Imagine a camera for the general public, +
with all included inside the frame.
--

[transition=fade]
[%notitle]
== Open Closed 8

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_8.svg[]
--

[.right-column]
--
There's no way to extend it...
--

[transition=fade]
[%notitle]
== Open Closed 9

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_9.svg[]
--

[.right-column]
--
Impossible to change the _battery_ ...
--

[transition=fade]
[%notitle]
== Open Closed 10

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_10.svg[]
--

[.right-column]
--
Neither the _optical system_...
--

[transition=fade]
[%notitle]
== Open Closed 11

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_11.svg[]
--

[.right-column]
--
Nor the _visor_.
--

[transition=fade]
[%notitle]
== Open Closed 12

[.left-column]
[.center]
--
image::images/marc/flexibility-openclosed_12.svg[]
--

[.right-column]
--
Nor could be extended either as _waterproof camera_ with _deported commands_.

[.fragment]
This camera doesn't respect the *open/closed* principle.
--

== Open closed.

The *Open/Closed* principle ensure that a component could be *extended* safely without being *modified*.


* It's very useful when the component
** is *_shared_* over several projects,
** is  well tested and validated,
** is sealed and modification is impossible.

[transition=fade]
[%notitle]
== Substitution 0

[.left-column]
[.center]
--
image::images/marc/flexibility-substitution_0.svg[]
--

[.right-column]
--
Imagine our professional camera again.

There's a range of optical of type _A_ that could use the "ultra-stabilization" engine of the camera.
--

[transition=fade]
[%notitle]
== Substitution 1

[.left-column]
[.center]
--
image::images/marc/flexibility-substitution_1.svg[]
--

[.right-column]
--
A premium product _extends_ the first one +
with more capabilities, and +
higher price.
--


[transition=fade]
[%notitle]
== Substitution 2

[.left-column]
[.center]
--
image::images/marc/flexibility-substitution_2.svg[]
--

[.right-column]
--
It still uses the "ultra-stabilization" engine. +
It still is _"a type A optical"_.

It could be _substitued_ to the first one.
--


[transition=fade]
[%notitle]
== Substitution 3

[.left-column]
[.center]
--
image::images/marc/flexibility-substitution_3.svg[]
--

[.right-column]
--
A cheap version is created, *but* this one *can not* use the "ultra-stabilization" engine.
--



[transition=fade]
[%notitle]
== Substitution 3

[.left-column]
[.center]
--
image::images/marc/flexibility-substitution_3.svg[]
--

[.right-column]
--
Althouh this last optical is branded as +
_"a type A optical"_, +
it *can not be substitued* to the parent type +
because it breaks the "ultra-stabilization" engine feature.

[.fragment]
It's not good :(
--


[transition=fade]
[%notitle]
== Substitution of Liskov

[.center]
Check you provide subtypes (_"type A minus"_) +
that could be *substitued* +
to the parent type (_"type A"_) +
without breaking something.


[transition=fade]
[%notitle]
== Substitution of Liskov

[.center]
This is, roughly, +
the
[.huge]#_Liskov Substitution_ Principle#.

[.fragment]
[quote]
[.center]
____
If S is a subtype of T, +
then objects of type T may be replaced +
with objects of type S without side effects.
____



// [transition=fade]
//[%notitle]
//== Open closed behavior
// A _FilmDirector_ has to check everything is ready before starting to shoot.

// [.big]
// [.large]
// [source,python,linums]
// ----
// class FilmDirector:
//     #...
//     def before_shooting_check_set_is_ready(camera: CameraDirector,
//                                            lighting: LightDirector):

//         return camera.is_ok() and lighting.is_ok()
// ----


// [.fragment]
// But on a movie with special effects, it have to get the Ok from FX director...

// [.fragment]
// [.big]
// [.large]
// [source,python,linums]
// ----
// class FilmDirector:
//     #...
//     def before_shooting_check_set_is_ready(camera: CameraDirector,
//                                            lighting: LightDirector,
//                                            fx: SpecialEffectDirector):
//         return camera.is_ok()
//                and lighting.is_ok()
//                and fx.is_ok()
// ----

// [.fragment]
// This class is not open to extends its _behavior_.


// [transition=fade]
//[%notitle]
//== Open closed behavior

// Using a list of directors opens the component for an extension of its behavior.

// [.big]
// [.large]
// [source,python,linums]
// ----
// class FilmDirector:
//     #...
//     def before_shooting_check_set_is_ready(directors: List):
//         return all(d.is_ok() for d in directors)
// ----


//end::include[]
