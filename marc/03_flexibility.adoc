= Flexibility

//tag::include[]

[.subsection.background]
[.center]
[%notitle]
== Flexibility

[.big]#{chapter_name} - Part {counter:design_counter:1}#

[.huge]#Flexibility#

[NOTE.notes]
--
* Delimit the perimeter
* Tell What it does, don't think about how it's done.
* Engage for interface, not (yet) about implementation
* Keep the freedom of experimentating
* => interface
--


== Coupling

[.center]
image::images/marc/coupling.gif[]

[.center]
When any change to one component implies to modify the other one.


== Coupling

[.at-top-right]
image::images/marc/coupling.gif[width=200]

* When components are tightly coupled
** Evolving one can quickly become a nightmare.
** Side effects will be numerous and discouraging.

[.fragment]
--
For a few components, it doesn't really matter.
--

== Coupling

But with a lot of components, it would turn into a nightmare !

[.center]
image::images/marc/OpenBCoupling.gif[]

[.center]
== So how to decouple ?


[background-color="black", background-video="images/marc/isolated_base.mp4",background-video-loop=true,background-video-muted=true,background-size="contain"]
[%notitle]
== How to decouple ?

[NOTE.notes]
--
By putting a flexible layer !
--

== How to decouple ?

* In software engineering, coupling means
bound by *too much* knowledge.
* Decoupling => Limit required knowledge

* Two strategies
** Only take into account contract FIND A NEW NAME s
** Have the necessary and sufficient appearance FIND A NEW NAME


[transition=fade]
== Only take into account contract  FIND A NEW NAME 0


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_0.svg[width=200]
--

[.right-column]
--
A component of type *A* +
_uses_ +
a component of type *B*.

This is a *_dependency_* between *A* and *B*.
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 1


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_1.svg[width=200]
--

[.right-column]
--
If *B* changes, *A* is certainly forced to _adapt_.
--


[transition=fade]
== Only take into account contract 1 FIND A NEW NAME b


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_propagation_0.svg[]
--

[.fragment]
[.right-column]
[.center]
--
image::images/marc/flexibility-bound2interface_propagation_1.svg[]
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 2


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_2.svg[width=200]
--

[.right-column]
--

Do not _bound_ *A*  +
*to* what dependency [.big]#*is*#, +
but *to* what it [.big]#*offers*#.

[.fragment]
A kind of [.big]#*contract*# describing only +
*WHAT* dependency does +
(and not *HOW* it does).
--


[transition=fade]
== Only take into account contract  FIND A NEW NAME 2



[.left-column]
--
image::images/marc/browser_contract.gif[]
--


[.right-column]
[.center]
--
* "Browser" contract
** _Fetch a content on internet given a valid URL_
** _Display content using HTML_
** _Submit valid HTTP form to a given URL_
** _Bookmark favorites_
** ...
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 3


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_3.svg[width=200]
--

[.right-column]
--
So as long as component +
*_respect_* the contract, +
it could be _anything_.

Dependency *implements* the contract.
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 4


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_4.svg[width=200]
--

[.right-column]
--
So as long as component +
*_respect_* the contract, +
it could be modified.

We don't care...
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 5


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_5.svg[width=200]
--

[.right-column]
--
But if contract changes, +
both of them have to change.
--


[transition=fade]
== Only take into account contract  FIND A NEW NAME 5


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_5bis.svg[width=200]
--

[.right-column]
--
From the *A* point of view, +
*only* _B contract_ exists.
--


[transition=fade]
== Only take into account contract  FIND A NEW NAME 6


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_6.svg[width=400]
--

[.right-column]
--
Illustration with a Camera Operator _using_ a camera of Fony Inc.
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 7


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_7.svg[width=400]
--

[.right-column]
--
If camera changes to a _very_ different model, +
_Camera Operator_ has certainly to _be adapted_.
--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 8


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_8.svg[width=400]
--

[.right-column]
--
As there's a lot of camera models, +
the better is to relate to a +
_camera contract_ instead of a _camera model_.

Contrat => [.huge]#interface#.


--

[transition=fade]
== Only take into account contract  FIND A NEW NAME 9


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_9.svg[width=400]
--

[.right-column]
--
So camera model could change, +
as long as it _implements_ the required *interface*...


We don't care.
--



[transition=fade]
== Only take into account contract 1 FIND A NEW NAME 0


[.left-column]
[.center]
--
image::images/marc/flexibility-bound2interface_10.svg[width=400]
--

[.right-column]
--
We could make tests
of _Camera Operator_ +
without *hacking* a real camera.

[.fragment]
Just use a _mock_ Camera implementing _Camera Interface_.
--


[%notitle]
[.center]
== Conclusion Of Abstraction

To get flexibility +
be bound to contract (interface), +
not implementation.



[NOTE.notes]
--
* In real life
** If you have a very simple dependency, don't bother with interface.
** Use *interfaces*
*** when there's several implementations,
*** _or_ delicat, complexe, heavy dependencies,
*** _or_ depenceny is hard to mock in tests.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 0


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_0.svg[width=600]
--

[.center]
[.right-column]
--


A TV _Reporting Camera Operator_ +
use a +
_Reporting Camera_ +
described by a +
_Reporting Camera Interface_.

[.fragment]
A _reporting camera_ is used +
for _reporting_ in the streets +


[.fragment]
It records
_video_
and
_sound_.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 0.1


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_0.1.svg[width=600]
--

[.right-column]
--
Someone decided to split +
_Reporting Camera Operator_ +
responsabilities +
in two parts.
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 0copie


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_0.svg[width=600]
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 2


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_2.svg[width=600]
--

[.right-column]
--
They use the same interface.
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 3


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_3.svg[width=600]
--

[.right-column]
--
But if the camera itself is separated into two components...

We get a nonsense.

A microphone that has to handle the video aspects is *stupid*.
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 4


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_4.svg[width=600]
--

[.right-column]
[.center]
--
We have to limit each of them +
to *WHAT* they do +
and *only* what they do.

*No more and no less.*
--



[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 5


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_5.svg[width=600]
--

[.right-column]
[.center]
--
This way, any dependency +
satisfying the interfaces +
could be used.
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_6.svg[width=600]
--

[.right-column]
[.center]
--
This way, any dependency +
satisfying the interfaces +
could be used.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6.1


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_6.1.svg[width=600]
--

[.right-column]
--
What about our _Reporting Camera Operator_ ? +

It could use the both interfaces.

Whether it's implemented by _two_ components...
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6.2


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_6.2.svg[width=600]
--

[.right-column]
--
\... or implemented by _only one_ component !

We don't care.
--





[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 7


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_7.svg[width=600]
--

[.right-column]
--
But if you're in a field +
limited to TV Reporting only, +
you would prefer talking about _Reporting camera_.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 7


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_7.svg[width=600]
--

[.right-column]
--
How to reconcile the two universes ?
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 7


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_7.svg[width=600]
--

[.right-column]
--
By making _Reporting camera_ +
be a _Camera interface_ +
*and* +
a _Microphone interface_ too.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 8


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_8.svg[width=600]
--

[.right-column]
--
So you have a very flexible architecture like this...
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 9


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_9.svg[width=600]
--

[.right-column]
--
\... or this with a delegation to the microphone for all the _Microphone stuff_.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6.before.2


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_6.before.2.svg[width=600]
--

[.right-column]
[.center]
--
We split a too general interface into +
two very user _focused_ interfaces.

[.fragment]
It called +
[.huge]#Segregation of Interfaces#.
--

[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6.3


[.center]
--
image::images/marc/flexibility-segregation_6.3.svg[width=600]

So the general _Reporting Camera Interface_ +
could be seen as a +
_video interface_ for video interested users.
--



[transition=fade][transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 6.4


[.center]
--
image::images/marc/flexibility-segregation_6.4.svg[width=600]


\...or a
_Microphone interface_ for sound interested users.
--


[transition=fade]
== Have the necessary and sufficient appearance FIND A NEW NAME 10


[.left-column]
[.center]
--
image::images/marc/flexibility-segregation_10.svg[width=600]
--

[.right-column]
[.center]
--
*Segregation Of Interfaces* allows +
to join different universes +
with different point of view.

Here the _TV universe_ +
and +
the camera _Manufacturer Universe_.
--

== Put a abstraction layer between component

*A REFAIRE*

A interface is door fire-cut.



//end::include[]
